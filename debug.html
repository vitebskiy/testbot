<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>DEBUG | Telegram Wi-Fi Guard</title>
    
    <!-- Telegram WebApp –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="telegram-web-app-theme" content="light">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            text-align: center;
        }
        
        .header {
            background: #dc3545;
            color: white;
            padding: 20px;
        }
        
        .content {
            padding: 20px;
        }
        
        .debug-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: left;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid #ddd;
        }
        
        .btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
            width: 100%;
        }
        
        .success { background: #28a745; }
        .warning { background: #ffc107; color: #000; }
        
        .log {
            max-height: 200px;
            overflow-y: auto;
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 11px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß DEBUG MODE</h1>
            <p>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        </div>
        
        <div class="content">
            <div class="debug-info">
                <strong>User Agent:</strong><br>
                <span id="userAgent">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            
            <div class="debug-info">
                <strong>Telegram WebApp:</strong><br>
                <span id="telegramInfo">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            
            <div class="debug-info">
                <strong>Network API:</strong><br>
                <span id="networkInfo">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            
            <div class="debug-info">
                <strong>–ü—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ö–æ—Å—Ç:</strong><br>
                <span id="protocolInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            
            <button id="testBtn" class="btn">üîç –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
            <button id="forceAccessBtn" class="btn warning">‚ö†Ô∏è –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø</button>
            
            <div class="debug-info">
                <strong>–õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</strong>
                <div id="log" class="log"></div>
            </div>
            
            <div id="hiddenContent" style="display: none; margin-top: 20px; padding: 20px; background: #e8f5e8; border-radius: 10px;">
                <h2>‚úÖ –î–û–°–¢–£–ü –ü–û–õ–£–ß–ï–ù!</h2>
                <p>–≠—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞.</p>
                <p><strong>–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</strong> –í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å–µ—Ç–∏!</p>
            </div>
        </div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            log.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            log.scrollTop = log.scrollHeight;
            console.log(`[DEBUG] ${message}`);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            addLog('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // User Agent
            document.getElementById('userAgent').textContent = navigator.userAgent;
            addLog(`User Agent: ${navigator.userAgent.substring(0, 50)}...`);
            
            // –ü—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ö–æ—Å—Ç
            const protocolInfo = `${window.location.protocol}//${window.location.host}${window.location.pathname}`;
            document.getElementById('protocolInfo').textContent = protocolInfo;
            addLog(`URL: ${protocolInfo}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram WebApp
            setTimeout(checkTelegramWebApp, 500);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º Network API
            setTimeout(checkNetworkAPI, 1000);
        });
        
        function checkTelegramWebApp() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                const info = `
–î–æ—Å—Ç—É–ø–µ–Ω: ‚úÖ –î–∞
–í–µ—Ä—Å–∏—è: ${tg.version || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${tg.platform || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: ${tg.colorScheme || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${tg.initDataUnsafe?.user?.first_name || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`;
                
                document.getElementById('telegramInfo').innerHTML = info;
                addLog('Telegram WebApp –æ–±–Ω–∞—Ä—É–∂–µ–Ω', 'success');
                addLog(`–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${tg.platform}, –í–µ—Ä—Å–∏—è: ${tg.version}`);
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebApp
                tg.ready();
                tg.expand();
                addLog('Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            } else {
                document.getElementById('telegramInfo').innerHTML = '‚ùå –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω (–æ–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä)';
                addLog('Telegram WebApp –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω', 'error');
            }
        }
        
        function checkNetworkAPI() {
            if ('connection' in navigator) {
                const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                const info = `
–î–æ—Å—Ç—É–ø–µ–Ω: ‚úÖ –î–∞
–¢–∏–ø: ${conn.type || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ç–∏–ø: ${conn.effectiveType || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
–°–∫–æ—Ä–æ—Å—Ç—å: ${conn.downlink || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'} Mbps
–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞: ${conn.saveData ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–≤—ã–∫–ª—é—á–µ–Ω–∞'}`;
                
                document.getElementById('networkInfo').innerHTML = info;
                addLog(`Network API: —Ç–∏–ø=${conn.type}, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π=${conn.effectiveType}`, 'success');
            } else {
                document.getElementById('networkInfo').innerHTML = '‚ùå Network API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                addLog('Network API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
            }
        }
        
        // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
        document.getElementById('testBtn').addEventListener('click', async function() {
            addLog('=== –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í ===');
            
            try {
                // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                addLog(`–¢–µ—Å—Ç 1 - –ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${isMobile ? '–î–∞' : '–ù–µ—Ç'}`, isMobile ? 'success' : 'info');
                
                // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
                const isHTTPS = window.location.protocol === 'https:';
                addLog(`–¢–µ—Å—Ç 2 - HTTPS –ø—Ä–æ—Ç–æ–∫–æ–ª: ${isHTTPS ? '–î–∞' : '–ù–µ—Ç'}`, isHTTPS ? 'success' : 'error');
                
                // –¢–µ—Å—Ç 3: –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
                addLog('–¢–µ—Å—Ç 3 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Google...');
                try {
                    const start = performance.now();
                    await fetch('https://www.google.com/favicon.ico', { method: 'HEAD' });
                    const end = performance.now();
                    const latency = Math.round(end - start);
                    addLog(`–¢–µ—Å—Ç 3 - Google –¥–æ—Å—Ç—É–ø–µ–Ω (${latency}ms)`, 'success');
                } catch (e) {
                    addLog('–¢–µ—Å—Ç 3 - Google –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                }
                
                // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram WebApp
                if (window.Telegram && window.Telegram.WebApp) {
                    addLog('–¢–µ—Å—Ç 4 - Telegram WebApp –∞–∫—Ç–∏–≤–µ–Ω', 'success');
                    
                    // –ü—Ä–æ–±—É–µ–º haptic feedback
                    try {
                        window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                        addLog('–¢–µ—Å—Ç 4 - Haptic feedback —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    } catch (e) {
                        addLog('–¢–µ—Å—Ç 4 - Haptic feedback –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    }
                } else {
                    addLog('–¢–µ—Å—Ç 4 - Telegram WebApp –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω', 'error');
                }
                
                // –ï—Å–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –ò–õ–ò –≤ Telegram –ò–õ–ò –Ω–∞ HTTPS - —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø
                if (isMobile || window.Telegram || isHTTPS) {
                    addLog('=== –†–ï–ó–£–õ–¨–¢–ê–¢: –î–û–°–¢–£–ü –†–ê–ó–†–ï–®–ï–ù ===', 'success');
                    document.getElementById('hiddenContent').style.display = 'block';
                    document.getElementById('testBtn').textContent = '‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã';
                    document.getElementById('testBtn').className = 'btn success';
                } else {
                    addLog('=== –†–ï–ó–£–õ–¨–¢–ê–¢: –î–û–°–¢–£–ü –ó–ê–ü–†–ï–©–ï–ù ===', 'error');
                }
                
            } catch (error) {
                addLog(`–û—à–∏–±–∫–∞ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤: ${error.message}`, 'error');
            }
        });
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        document.getElementById('forceAccessBtn').addEventListener('click', function() {
            addLog('=== –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –î–û–°–¢–£–ü –ê–ö–¢–ò–í–ò–†–û–í–ê–ù ===', 'success');
            document.getElementById('hiddenContent').style.display = 'block';
            document.getElementById('forceAccessBtn').textContent = '‚úÖ –î–æ—Å—Ç—É–ø –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω';
            document.getElementById('forceAccessBtn').className = 'btn success';
            
            if (window.Telegram && window.Telegram.WebApp) {
                try {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                } catch (e) {
                    addLog('Haptic feedback –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                }
            }
        });
    </script>
</body>
</html>
